{% extends "index.html" %}

{% block content %} 
<div class="scrollit">
  <style>
    .table {
      font-size: 0.9em;
    }
  </style>
  <table id="data" class="table">
    <!-- fix column widths -->
    <colgroup>
      <col style="width: 5%">
      <col style="width: 20%">
      <col style="width: 10%">
      <col style="width: 25%">
      <col style="width: 10%">
      <col style="width: 22.5%">
      <col style="width: 7.5%">
    </colgroup>
    <thead style="background-color: white;">
        <th>Level</th>
        <th>Name</th>
        <th>School</th>
        <th>Casting Time</th>
        <th>Range</th>
        <th>Duration</th>
        <th>Components</th>
      </tr>
    </thead>
    <tbody>
      {% for spell in spells %}
        <tr>
          <td>{{ spell.level }}</td>
          <td>{{ spell.name }}</td>
          <td>{{ spell.school }}</td>
          <td>{{ spell.casting_time }}</td>
          <td>{{ spell.range }}</td>
          <td>{{ spell.duration }}</td>
          <td>{{ spell.components }}</td>
      {% endfor %}
    </tbody>
  </table>
</div>

<script src="{{ url_for('static', filename='color.js') }}"></script>

<script>
  $(document).ready(function() {
    $("#data tbody tr").click(function() {
      var spell = $(this).find("td:nth-child(2)").html();
      spell = spell.replace("/", " ");
      // send get request and change sidebar text to response
      // also make sidebar background color white
      $.get("/spell/" + spell, function(data, status) {
        $("#sidebar-text").html(data);
        $("#sidebar-text").css("background-color", "white");
      });
    });
  });
</script>
  
{% endblock %}
