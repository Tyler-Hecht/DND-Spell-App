{% extends "index.html" %}

{% block levels %}
<div id="checkboxes">
  <input type="checkbox" id="level1" name="level1" value="1" onclick="levelSearch()" {% if level1 %}checked{% endif %}>
  <label for="level1">1st</label>
  <input type="checkbox" id="level2" name="level2" value="2" onclick="levelSearch()" {% if level2 %}checked{% endif %}>
  <label for="level2">2nd</label>
  <input type="checkbox" id="level3" name="level3" value="3" onclick="levelSearch()" {% if level3 %}checked{% endif %}>
  <label for="level3">3rd</label>
  <input type="checkbox" id="level4" name="level4" value="4" onclick="levelSearch()" {% if level4 %}checked{% endif %}>
  <label for="level4">4th</label>
  <input type="checkbox" id="level5" name="level5" value="5" onclick="levelSearch()" {% if level5 %}checked{% endif %}>
  <label for="level5">5th</label>
  <div id = "fullCaster">
    <input type="checkbox" id="level6" name="level6" value="6" onclick="levelSearch()" {% if level6 %}checked{% endif %}>
    <label for="level6">6th</label>
    <input type="checkbox" id="level7" name="level7" value="7" onclick="levelSearch()" {% if level7 %}checked{% endif %}>
    <label for="level7">7th</label>
    <input type="checkbox" id="level8" name="level8" value="8" onclick="levelSearch()" {% if level8 %}checked{% endif %}>
    <label for="level8">8th</label>
    <input type="checkbox" id="level9" name="level9" value="9" onclick="levelSearch()" {% if level9 %}checked{% endif %}>
    <label for="level9">9th</label>
    <input type="checkbox" id="level0" name="level0" value="0" onclick="levelSearch()" {% if level0 %}checked{% endif %}>
    <label for="level0">Cantrip</label>
  </div>
</div>

<script>
  // when a checkbox is clicked, update the table
  function levelSearch() {
    var level1 = document.getElementById("level1").checked;
    var level2 = document.getElementById("level2").checked;
    var level3 = document.getElementById("level3").checked;
    var level4 = document.getElementById("level4").checked;
    var level5 = document.getElementById("level5").checked;
    var level6 = document.getElementById("level6").checked;
    var level7 = document.getElementById("level7").checked;
    var level8 = document.getElementById("level8").checked;
    var level9 = document.getElementById("level9").checked;
    var level0 = document.getElementById("level0").checked;

    // send get request and pass list of checked boxes as json
    let formData = {
      "level1": level1,
      "level2": level2,
      "level3": level3,
      "level4": level4,
      "level5": level5,
      "level6": level6,
      "level7": level7,
      "level8": level8,
      "level9": level9,
      "level0": level0}
    $.post("/levelSearch", formData)
      .done(function(data) {
        // update table
        $("#table-content").html(data);
      });

  }
</script>

{% endblock %}
